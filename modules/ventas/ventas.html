<div class="ventas-module">
    <!-- Vista Principal: POS, Estadísticas o Historial -->
    <div class="ventas-content">
        <!-- Header Unificado con Pestañas -->
        <div class="ventas-header-unified">
            <h2 class="ventas-module-title">
                <svg class="title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
                Ventas
            </h2>
            <div class="ventas-tabs-wrapper">
                <div class="ventas-tabs">
                    <button class="ventas-tab active" data-tab="pos">
                        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="9" cy="21" r="1"></circle>
                            <circle cx="20" cy="21" r="1"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                        </svg>
                        <span class="tab-text">POS</span>
                    </button>
                    <button class="ventas-tab" data-tab="estadisticas">
                        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="20" x2="18" y2="10"></line>
                            <line x1="12" y1="20" x2="12" y2="4"></line>
                            <line x1="6" y1="20" x2="6" y2="14"></line>
                        </svg>
                        <span class="tab-text">Estadísticas</span>
                    </button>
                    <button class="ventas-tab" data-tab="historial">
                        <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                            <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                        </svg>
                        <span class="tab-text">Historial</span>
                    </button>
                    <div class="tab-indicator"></div>
                </div>
            </div>
        </div>

        <!-- TAB 1: PUNTO DE VENTA -->
        <div class="tab-content active" id="tab-pos">
            <div class="pos-container">
                <!-- Panel Izquierdo: Búsqueda y Productos -->
                <div class="pos-left">
                    <div class="pos-search-section">
                        <div class="search-container">
                            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                            <input 
                                type="text" 
                                id="pos-search" 
                                placeholder="Buscar producto por nombre o código de barras..." 
                                class="search-input"
                                autocomplete="off"
                            >
                            <!-- Dropdown de resultados -->
                            <div id="productos-resultados" class="search-dropdown">
                                <!-- Se llena dinámicamente -->
                            </div>
                        </div>
                    </div>

                    <!-- Carrito en el área principal -->
                    <div class="pos-content-area">
                        <!-- Pestañas de Carritos Múltiples -->
                        <div id="carritos-tabs-container" class="carritos-tabs-container">
                            <!-- Se llena dinámicamente -->
                        </div>

                        <div class="carrito-header">
                            <h3>
                                <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="9" cy="21" r="1"></circle>
                                    <circle cx="20" cy="21" r="1"></circle>
                                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                                </svg>
                                Carrito de Venta
                            </h3>
                            <div style="display: flex; gap: 8px; align-items: center;">
                                <button id="btn-solicitar-edicion" class="btn-solicitar-edicion" onclick="ventasModule.solicitarAutorizacionEdicion()" title="Solicitar autorización para editar precios">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                        <path d="M12 2v20M2 12h20"></path>
                                        <circle cx="12" cy="12" r="10"></circle>
                                    </svg>
                                    <span class="btn-text">Editar precios</span>
                                </button>
                                <button id="btn-limpiar-carrito" class="btn-clear">Limpiar</button>
                            </div>
                        </div>

                        <div id="carrito-items" class="carrito-items">
                            <div class="empty-state">
                                <div class="empty-icon">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                        <circle cx="9" cy="21" r="1"></circle>
                                        <circle cx="20" cy="21" r="1"></circle>
                                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                                    </svg>
                                </div>
                                <p>El carrito está vacío</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Panel Derecho: Totales y Controles de Venta -->
                <div class="pos-right">
                    <div class="carrito-container">
                        <!-- Resumen de totales -->
                        <div class="carrito-totales">
                            <div class="total-row">
                                <span>Subtotal:</span>
                                <span id="carrito-subtotal">$0.00</span>
                            </div>
                            <!-- FUTURO: Descomentar cuando se active manejo de impuestos
                            <div class="total-row">
                                <span>IVA (16%):</span>
                                <span id="carrito-iva">$0.00</span>
                            </div>
                            -->
                            <div class="total-row total-final">
                                <span><strong>TOTAL:</strong></span>
                                <span id="carrito-total"><strong>$0.00</strong></span>
                            </div>
                        </div>

                        <!-- Tipo de venta y método de pago -->
                        <div class="venta-options">
                            <div class="form-group">
                                <label>Tipo de Venta (Precio)</label>
                                <select id="tipo-venta" class="select-input">
                                    <option value="publico">Público</option>
                                    <option value="mayorista">Mayorista</option>
                                    <option value="personalizado">Cliente Personalizado</option>
                                </select>
                            </div>
                            <div class="form-group" id="cliente-personalizado-group" style="display: none;">
                                <label>Cliente con Precios Especiales <span style="color: #FF3B30;">*</span></label>
                                <select id="select-cliente-personalizado" class="select-input" required>
                                    <option value="">Seleccionar cliente</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Método de Pago</label>
                                <select id="metodo-venta" class="select-input">
                                    <option value="efectivo">Efectivo</option>
                                    <option value="tarjeta">Tarjeta</option>
                                    <option value="transferencia">Transferencia</option>
                                    <option value="credito">Crédito</option>
                                </select>
                            </div>
                            <div class="form-group" id="cliente-credito-group" style="display: none;">
                                <label>Cliente a Crédito <span style="color: #FF3B30;">*</span></label>
                                <select id="select-cliente-credito" class="select-input" required>
                                    <option value="">Seleccionar cliente</option>
                                </select>
                            </div>
                        </div>

                        <!-- Alerta de caja cerrada -->
                        <div id="alerta-sin-caja" class="alerta-sin-caja" style="display: none;">
                            <div class="alerta-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                </svg>
                            </div>
                            <div class="alerta-content">
                                <div class="alerta-title">Caja Cerrada</div>
                                <div class="alerta-text">Debes abrir una caja en el módulo de Caja antes de realizar ventas</div>
                            </div>
                        </div>

                        <!-- Botón de cobrar -->
                        <button id="btn-procesar-venta" class="btn-procesar" disabled>
                            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                            </svg>
                            <span>Procesar Venta</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 2: ESTADÍSTICAS -->
        <div class="tab-content" id="tab-estadisticas">
            <div class="estadisticas-container">
                <div class="stats-grid" id="ventas-stats-grid">
                    <div class="stats-card" style="background: linear-gradient(135deg, #34C759, #30B84A);">
                        <h3>
                            <svg class="stats-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                            </svg>
                            Ventas Hoy
                        </h3>
                        <p class="stats-value" id="stat-ventas-hoy">$0.00</p>
                        <span class="stats-label" id="stat-ventas-hoy-count">0 transacciones</span>
                    </div>
                    <div class="stats-card" style="background: linear-gradient(135deg, #32D74B, #30B84A);">
                        <h3>
                            <svg class="stats-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                            </svg>
                            Efectivo
                        </h3>
                        <p class="stats-value" id="stat-efectivo">$0.00</p>
                        <span class="stats-label">Ventas de hoy</span>
                    </div>
                    <div class="stats-card" style="background: linear-gradient(135deg, #007AFF, #5856D6);">
                        <h3>
                            <svg class="stats-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                                <line x1="1" y1="10" x2="23" y2="10"></line>
                            </svg>
                            Tarjeta
                        </h3>
                        <p class="stats-value" id="stat-tarjeta">$0.00</p>
                        <span class="stats-label">Ventas de hoy</span>
                    </div>
                    <div class="stats-card" style="background: linear-gradient(135deg, #5856D6, #AF52DE);">
                        <h3>
                            <svg class="stats-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect>
                                <line x1="12" y1="18" x2="12.01" y2="18"></line>
                            </svg>
                            Transferencia
                        </h3>
                        <p class="stats-value" id="stat-transferencia">$0.00</p>
                        <span class="stats-label">Ventas de hoy</span>
                    </div>
                    <div class="stats-card" style="background: linear-gradient(135deg, #FF9500, #FF8C00);">
                        <h3>
                            <svg class="stats-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                                <line x1="1" y1="10" x2="23" y2="10"></line>
                            </svg>
                            Crédito Hoy
                        </h3>
                        <p class="stats-value" id="stat-credito">$0.00</p>
                        <span class="stats-label">Ventas a crédito</span>
                    </div>
                    <div class="stats-card" style="background: linear-gradient(135deg, #FF3B30, #FF6B58);">
                        <h3>
                            <svg class="stats-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            Créditos Pendientes
                        </h3>
                        <p class="stats-value" id="stat-creditos-pendientes">$0.00</p>
                        <span class="stats-label">Por cobrar</span>
                    </div>
                    <div class="stats-card" style="background: linear-gradient(135deg, #0A84FF, #64D2FF);">
                        <h3>
                            <svg class="stats-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                            Ventas del Mes
                        </h3>
                        <p class="stats-value" id="stat-ventas-mes">$0.00</p>
                        <span class="stats-label" id="stat-ventas-mes-count">0 transacciones</span>
                    </div>
                    <div class="stats-card" style="background: linear-gradient(135deg, #AF52DE, #DA70D6);">
                        <h3>
                            <svg class="stats-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <circle cx="12" cy="12" r="6"></circle>
                                <circle cx="12" cy="12" r="2"></circle>
                            </svg>
                            Ticket Promedio
                        </h3>
                        <p class="stats-value" id="stat-ticket-promedio">$0.00</p>
                        <span class="stats-label">Por venta hoy</span>
                    </div>
                    <div class="stats-card" style="background: linear-gradient(135deg, #30B84A, #32D74B);">
                        <h3>
                            <svg class="stats-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0z"></path>
                            </svg>
                            Utilidad del Día
                        </h3>
                        <p class="stats-value" id="stat-utilidad-dia">$0.00</p>
                        <span class="stats-label">Ganancia neta</span>
                    </div>
                    <div class="stats-card" style="background: linear-gradient(135deg, #5856D6, #7D7AFF);">
                        <h3>
                            <svg class="stats-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                            Clientes Atendidos
                        </h3>
                        <p class="stats-value" id="stat-clientes-atendidos">0</p>
                        <span class="stats-label">Hoy</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 3: HISTORIAL -->
        <div class="tab-content" id="tab-historial">
            <div class="historial-container">
                <!-- Filtros -->
                <div class="historial-filters">
                    <div class="search-container">
                        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                        <input 
                            type="text" 
                            id="historial-search" 
                            placeholder="Buscar por folio, cliente..." 
                            class="search-input"
                        >
                    </div>
                    <select id="filter-periodo" class="filter-select">
                        <option value="hoy">Hoy</option>
                        <option value="ayer">Ayer</option>
                        <option value="semana" selected>Esta Semana</option>
                        <option value="mes">Este Mes</option>
                        <option value="trimestre">Último Trimestre</option>
                        <option value="año">Este Año</option>
                        <option value="personalizado">Personalizado</option>
                    </select>
                    <div class="date-range-custom" id="date-range-custom" style="display: none;">
                        <input type="date" id="fecha-inicio" class="date-input">
                        <span class="date-separator">a</span>
                        <input type="date" id="fecha-fin" class="date-input">
                        <button class="btn-aplicar-fechas" id="btn-aplicar-fechas">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                        </button>
                    </div>
                    <select id="filter-tipo-venta" class="filter-select">
                        <option value="">Todos los tipos</option>
                        <option value="publico">Público</option>
                        <option value="mayorista">Mayorista</option>
                        <option value="credito">Crédito</option>
                    </select>
                    <select id="filter-estado" class="filter-select">
                        <option value="">Todos los estados</option>
                        <option value="completada">Completadas</option>
                        <option value="cancelada">Canceladas</option>
                        <option value="pendiente">Pendientes</option>
                    </select>
                    <button id="btn-descargar-excel" class="btn-descargar-excel" onclick="ventasModule.descargarHistorialExcel()" title="Descargar historial filtrado en Excel">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 18px; height: 18px;">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        <span>Descargar Excel</span>
                    </button>
                </div>

                <!--Tabla de ventas -->
                <div class="historial-table-container">
                    <table class="historial-table">
                        <thead>
                            <tr>
                                <th style="min-width: 120px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <svg class="table-header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                                            <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                                        </svg>
                                        <span>Folio</span>
                                    </div>
                                </th>
                                <th style="min-width: 150px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <svg class="table-header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                            <line x1="16" y1="2" x2="16" y2="6"></line>
                                            <line x1="8" y1="2" x2="8" y2="6"></line>
                                            <line x1="3" y1="10" x2="21" y2="10"></line>
                                        </svg>
                                        <span>Fecha/Hora</span>
                                    </div>
                                </th>
                                <th style="min-width: 120px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <svg class="table-header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="12" cy="7" r="4"></circle>
                                        </svg>
                                        <span>Vendedor</span>
                                    </div>
                                </th>
                                <th style="min-width: 150px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <svg class="table-header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="9" cy="7" r="4"></circle>
                                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                        </svg>
                                        <span>Cliente</span>
                                    </div>
                                </th>
                                <th style="min-width: 100px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <svg class="table-header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                                            <polyline points="2 17 12 22 22 17"></polyline>
                                            <polyline points="2 12 12 17 22 12"></polyline>
                                        </svg>
                                        <span>Tipo</span>
                                    </div>
                                </th>
                                <th style="min-width: 80px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <svg class="table-header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="9" cy="21" r="1"></circle>
                                            <circle cx="20" cy="21" r="1"></circle>
                                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                                        </svg>
                                        <span>Items</span>
                                    </div>
                                </th>
                                <th style="min-width: 100px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <svg class="table-header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <line x1="12" y1="1" x2="12" y2="23"></line>
                                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                                        </svg>
                                        <span>Total</span>
                                    </div>
                                </th>
                                <th style="min-width: 100px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <svg class="table-header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                                        </svg>
                                        <span>Utilidad</span>
                                    </div>
                                </th>
                                <th style="min-width: 120px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <svg class="table-header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                                            <line x1="1" y1="10" x2="23" y2="10"></line>
                                        </svg>
                                        <span>Pago</span>
                                    </div>
                                </th>
                                <th style="min-width: 100px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <svg class="table-header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polyline points="20 6 9 17 4 12"></polyline>
                                        </svg>
                                        <span>Estado</span>
                                    </div>
                                </th>
                                <th style="min-width: 120px;">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <svg class="table-header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="1"></circle>
                                            <circle cx="12" cy="5" r="1"></circle>
                                            <circle cx="12" cy="19" r="1"></circle>
                                        </svg>
                                        <span>Acciones</span>
                                    </div>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="historial-table-body">
                            <tr>
                                <td colspan="11" style="text-align: center; padding: 40px; color: #6D6D80;">
                                    No hay ventas registradas
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading overlay -->
    <div id="loading-overlay-ventas" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Procesando venta...</p>
        </div>
    </div>
</div>

<style>
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(8px);
    z-index: 99999;
    display: flex;
    align-items: center;
    justify-content: center;
}

.loading-overlay.active {
    display: flex !important;
}

.loading-spinner {
    text-align: center;
    color: white;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid rgba(255, 255, 255, 0.3);
    border-top-color: white;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto 16px;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.loading-spinner p {
    font-size: 1.1rem;
    font-weight: 600;
}
</style>